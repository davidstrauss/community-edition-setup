version: 1

dn: inum=%(inumOrg)s!A51E.76DA,ou=scripts,o=%(inumOrg)s,o=gluu
objectClass: oxCustomScript
objectClass: top
description: Sample Authentication Script
displayName: basic
gluuStatus: false
inum: %(inumOrg)s!A51E.76DA
oxLevel: 100
oxModuleProperty: {"value1":"usage_type","value2":"interactive","description
 ":""}
oxRevision: 1
oxScript:: ZnJvbSBvcmcuamJvc3Muc2VhbS5zZWN1cml0eSBpbXBvcnQgSWRlbnRpdHkNCmZyb
 20gb3JnLnhkaS5tb2RlbC5jdXN0b20uc2NyaXB0LnR5cGUuYXV0aCBpbXBvcnQgQ3VzdG9tQXV0
 aGVudGljYXRvclR5cGUNCmZyb20gb3JnLnhkaS5veGF1dGguc2VydmljZSBpbXBvcnQgVXNlclN
 lcnZpY2UNCmZyb20gb3JnLnhkaS51dGlsIGltcG9ydCBTdHJpbmdIZWxwZXINCg0KaW1wb3J0IG
 phdmENCg0KY2xhc3MgRXh0ZXJuYWxBdXRoZW50aWNhdG9yKEN1c3RvbUF1dGhlbnRpY2F0b3JUe
 XBlKToNCiAgICBkZWYgX19pbml0X18oc2VsZiwgY3VycmVudFRpbWVNaWxsaXMpOg0KICAgICAg
 ICBzZWxmLmN1cnJlbnRUaW1lTWlsbGlzID0gY3VycmVudFRpbWVNaWxsaXMNCg0KICAgIGRlZiB
 pbml0KHNlbGYsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToNCiAgICAgICAgcHJpbnQgIkJhc2
 ljIGluaXRpYWxpemF0aW9uIg0KICAgICAgICBwcmludCAiQmFzaWMgaW5pdGlhbGl6ZWQgc3VjY
 2Vzc2Z1bGx5Ig0KICAgICAgICByZXR1cm4gVHJ1ZSAgIA0KDQogICAgZGVmIGlzVmFsaWRBdXRo
 ZW50aWNhdGlvbk1ldGhvZChzZWxmLCB1c2FnZVR5cGUsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGV
 zKToNCiAgICAgICAgcmV0dXJuIFRydWUNCg0KICAgIGRlZiBnZXRBbHRlcm5hdGl2ZUF1dGhlbn
 RpY2F0aW9uTWV0aG9kKHNlbGYsIHVzYWdlVHlwZSwgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMpO
 g0KICAgICAgICByZXR1cm4gTm9uZQ0KDQogICAgZGVmIGF1dGhlbnRpY2F0ZShzZWxmLCBjb25m
 aWd1cmF0aW9uQXR0cmlidXRlcywgcmVxdWVzdFBhcmFtZXRlcnMsIHN0ZXApOg0KICAgICAgICB
 pZiAoc3RlcCA9PSAxKToNCiAgICAgICAgICAgIHByaW50ICJCYXNpYyBhdXRoZW50aWNhdGUgZm
 9yIHN0ZXAgMSINCg0KICAgICAgICAgICAgY3JlZGVudGlhbHMgPSBJZGVudGl0eS5pbnN0YW5jZ
 SgpLmdldENyZWRlbnRpYWxzKCkNCiAgICAgICAgICAgIHVzZXJfbmFtZSA9IGNyZWRlbnRpYWxz
 LmdldFVzZXJuYW1lKCkNCiAgICAgICAgICAgIHVzZXJfcGFzc3dvcmQgPSBjcmVkZW50aWFscy5
 nZXRQYXNzd29yZCgpDQoNCiAgICAgICAgICAgIGxvZ2dlZF9pbiA9IEZhbHNlDQogICAgICAgIC
 AgICBpZiAoU3RyaW5nSGVscGVyLmlzTm90RW1wdHlTdHJpbmcodXNlcl9uYW1lKSBhbmQgU3Rya
 W5nSGVscGVyLmlzTm90RW1wdHlTdHJpbmcodXNlcl9wYXNzd29yZCkpOg0KICAgICAgICAgICAg
 ICAgIHVzZXJTZXJ2aWNlID0gVXNlclNlcnZpY2UuaW5zdGFuY2UoKQ0KICAgICAgICAgICAgICA
 gIGxvZ2dlZF9pbiA9IHVzZXJTZXJ2aWNlLmF1dGhlbnRpY2F0ZSh1c2VyX25hbWUsIHVzZXJfcG
 Fzc3dvcmQpDQoNCiAgICAgICAgICAgIGlmIChub3QgbG9nZ2VkX2luKToNCiAgICAgICAgICAgI
 CAgICByZXR1cm4gRmFsc2UNCiMgQ29tbWVudGVkIG91dCBiZWN1YXNlIHdlIGRvIHRoZSBzYW1l
 IGluIEF1dGhlbnRpY2F0aW9uU2VydmljZS5hdXRoZW50aWNhdGUgbWV0aG9kDQojDQojICAgICA
 gICAgICAgdXNlciA9IHVzZXJTZXJ2aWNlLmdldFVzZXIodXNlcl9uYW1lKQ0KIyAgICAgICAgIC
 AgIGlmICh1c2VyID09IE5vbmUpOg0KIyAgICAgICAgICAgICAgICBwcmludCAiQmFzaWMgYXV0a
 GVudGljYXRlIGZvciBzdGVwIDEuIEZhaWxlZCB0byBmaW5kIHVzZXIgaW4gbG9jYWwgTERBUCIN
 CiMgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQojDQojICAgICAgICAgICAgIyBTdG9yZSB
 1c2VyIHRvIGFsbG93IHVzZSB0aGlzIG1vZHVsZSBmb3Igd2ViIHNlcnZpY2VzIA0KIyAgICAgIC
 AgICAgIGNyZWRlbnRpYWxzLnNldFVzZXIodXNlcik7DQoNCiAgICAgICAgICAgIHJldHVybiBUc
 nVlDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCg0KICAgIGRlZiBw
 cmVwYXJlRm9yU3RlcChzZWxmLCBjb25maWd1cmF0aW9uQXR0cmlidXRlcywgcmVxdWVzdFBhcmF
 tZXRlcnMsIHN0ZXApOg0KICAgICAgICBpZiAoc3RlcCA9PSAxKToNCiAgICAgICAgICAgIHByaW
 50ICJCYXNpYyBwcmVwYXJlIGZvciBTdGVwIDEiDQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KI
 CAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQoNCiAgICBkZWYgZ2V0RXh0
 cmFQYXJhbWV0ZXJzRm9yU3RlcChzZWxmLCBjb25maWd1cmF0aW9uQXR0cmlidXRlcywgc3RlcCk
 6DQogICAgICAgIHJldHVybiBOb25lDQoNCiAgICBkZWYgZ2V0Q291bnRBdXRoZW50aWNhdGlvbl
 N0ZXBzKHNlbGYsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToNCiAgICAgICAgcmV0dXJuIDENC
 g0KICAgIGRlZiBnZXRQYWdlRm9yU3RlcChzZWxmLCBjb25maWd1cmF0aW9uQXR0cmlidXRlcywg
 c3RlcCk6DQogICAgICAgIHJldHVybiAiIg0KDQogICAgZGVmIGxvZ291dChzZWxmLCBjb25maWd
 1cmF0aW9uQXR0cmlidXRlcywgcmVxdWVzdFBhcmFtZXRlcnMpOg0KICAgICAgICByZXR1cm4gVH
 J1ZQ0KDQogICAgZGVmIGdldEFwaVZlcnNpb24oc2VsZik6DQogICAgICAgIHJldHVybiAzDQo=
oxScriptType: custom_authentication
programmingLanguage: python

dn: inum=%(inumOrg)s!DAA9.B788,ou=scripts,o=%(inumOrg)s,o=gluu
objectClass: oxCustomScript
objectClass: top
description: Sample Client Registration Script
displayName: client_registration
gluuStatus: false
inum: %(inumOrg)s!DAA9.B788
oxLevel: 100
oxRevision: 1
oxScript:: ZnJvbSBvcmcueGRpLm1vZGVsLmN1c3RvbS5zY3JpcHQudHlwZS5jbGllbnQgaW1wb
 3J0IENsaWVudFJlZ2lzdHJhdGlvblR5cGUKZnJvbSBvcmcueGRpLnV0aWwgaW1wb3J0IFN0cmlu
 Z0hlbHBlciwgQXJyYXlIZWxwZXIKZnJvbSBvcmcueGRpLm94YXV0aC5zZXJ2aWNlIGltcG9ydCB
 TY29wZVNlcnZpY2UKZnJvbSBqYXZhLnV0aWwgaW1wb3J0IEFycmF5cywgQXJyYXlMaXN0CgppbX
 BvcnQgamF2YQoKY2xhc3MgQ2xpZW50UmVnaXN0cmF0aW9uKENsaWVudFJlZ2lzdHJhdGlvblR5c
 GUpOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGN1cnJlbnRUaW1lTWlsbGlzKToKICAgICAgICBz
 ZWxmLmN1cnJlbnRUaW1lTWlsbGlzID0gY3VycmVudFRpbWVNaWxsaXMKCiAgICBkZWYgaW5pdCh
 zZWxmLCBjb25maWd1cmF0aW9uQXR0cmlidXRlcyk6CiAgICAgICAgcHJpbnQgIkNsaWVudCByZW
 dpc3RyYXRpb24gaW5pdGlhbGl6YXRpb24iCgogICAgICAgIHNlbGYuc2NvcGVTZXJ2aWNlID0gU
 2NvcGVTZXJ2aWNlLmluc3RhbmNlKCkKCiAgICAgICAgcHJpbnQgIkNsaWVudCByZWdpc3RyYXRp
 b24gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5IgoKICAgICAgICByZXR1cm4gVHJ1ZSAgIAoKICA
 gIGRlZiBkZXN0cm95KHNlbGYsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToKICAgICAgICBwcm
 ludCAiQ2xpZW50IHJlZ2lzdHJhdGlvbiBkZXN0cm95IgogICAgICAgIHByaW50ICJDbGllbnQgc
 mVnaXN0cmF0aW9uIGRlc3Ryb3llZCBzdWNjZXNzZnVsbHkiCiAgICAgICAgcmV0dXJuIFRydWUg
 ICAKCiAgICAjIFVwZGF0ZSBjbGllbnQgZW50cnkgYmVmb3JlIHBlcnNpc3RlbnQgaXQKICAgICM
 gICByZWdpc3RlclJlcXVlc3QgaXMgb3JnLnhkaS5veGF1dGguY2xpZW50LlJlZ2lzdGVyUmVxdW
 VzdAogICAgIyAgIGNsaWVudCBpcyBvcmcueGRpLm94YXV0aC5tb2RlbC5yZWdpc3RyYXRpb24uQ
 2xpZW50CiAgICAjICAgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMgaXMgamF2YS51dGlsLk1hcDxT
 dHJpbmcsIFNpbXBsZUN1c3RvbVByb3BlcnR5PgogICAgZGVmIHVwZGF0ZUNsaWVudChzZWxmLCB
 yZWdpc3RlclJlcXVlc3QsIGNsaWVudCwgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMpOgogICAgIC
 AgIHJlZGlyZWN0VXJpcyA9IGNsaWVudC5nZXRSZWRpcmVjdFVyaXMoKQogICAgICAgIHByaW50I
 CJSZWRpcmVjdCBVcmlzOiIsIHJlZGlyZWN0VXJpcwoKICAgICAgICBhZGRBZGRyZXNzU2NvcGUg
 PSBGYWxzZQogICAgICAgIGZvciByZWRpcmVjdFVyaSBpbiByZWRpcmVjdFVyaXM6CiAgICAgICA
 gICAgIGlmIChTdHJpbmdIZWxwZXIuZXF1YWxzSWdub3JlQ2FzZShyZWRpcmVjdFVyaSwgImh0dH
 BzOi8vY2xpZW50LmV4YW1wbGUuY29tL2V4YW1wbGUxIikpOgogICAgICAgICAgICAgICAgYWRkQ
 WRkcmVzc1Njb3BlID0gVHJ1ZQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAKICAgICAg
 ICBwcmludCAiSXMgYWRkIGFkZHJlc3Mgc2NvcGU6IiwgYWRkQWRkcmVzc1Njb3BlCgogICAgICA
 gIGlmIChhZGRBZGRyZXNzU2NvcGUpOgogICAgICAgICAgICBjdXJyZW50U2NvcGVzID0gY2xpZW
 50LmdldFNjb3BlcygpCiAgICAgICAgICAgIHByaW50ICJDdXJyZW50IHNjb3BlczoiLCBjdXJyZ
 W50U2NvcGVzCiAgICAgICAgICAgIAogICAgICAgICAgICBhZGRyZXNzU2NvcGUgPSBzZWxmLnNj
 b3BlU2VydmljZS5nZXRTY29wZUJ5RGlzcGxheU5hbWUoImFkZHJlc3MiKQogICAgICAgICAgICB
 uZXdTY29wZXMgPSBBcnJheUhlbHBlci5hZGRJdGVtVG9TdHJpbmdBcnJheShjdXJyZW50U2NvcG
 VzLCBhZGRyZXNzU2NvcGUuZ2V0RG4oKSkKICAgIAogICAgICAgICAgICBwcmludCAiUmVzdWx0I
 HNjb3BlczoiLCBuZXdTY29wZXMKICAgICAgICAgICAgY2xpZW50LnNldFNjb3BlcyhuZXdTY29w
 ZXMpCgogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIGxvZ291dChzZWxmLCBjb25maWd1cmF
 0aW9uQXR0cmlidXRlcywgcmVxdWVzdFBhcmFtZXRlcnMpOgogICAgICAgIHJldHVybiBUcnVlCg
 ogICAgZGVmIGdldEFwaVZlcnNpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIDEK
oxScriptType: client_registration
programmingLanguage: python

dn: inum=%(inumOrg)s!522F.CDC5,ou=scripts,o=%(inumOrg)s,o=gluu
objectClass: oxCustomScript
objectClass: top
description: Sample User Registration Script
displayName: user_registration
gluuStatus: false
inum: %(inumOrg)s!522F.CDC5
oxLevel: 100
oxRevision: 1
oxScript:: ZnJvbSBvcmcueGRpLm1vZGVsLmN1c3RvbS5zY3JpcHQudHlwZS51c2VyIGltcG9yd
 CBVc2VyUmVnaXN0cmF0aW9uVHlwZQpmcm9tIG9yZy54ZGkudXRpbCBpbXBvcnQgU3RyaW5nSGVs
 cGVyLCBBcnJheUhlbHBlcgpmcm9tIGphdmEudXRpbCBpbXBvcnQgQXJyYXlzLCBBcnJheUxpc3Q
 KCmltcG9ydCBqYXZhCgpjbGFzcyBVc2VyUmVnaXN0cmF0aW9uKFVzZXJSZWdpc3RyYXRpb25UeX
 BlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjdXJyZW50VGltZU1pbGxpcyk6CiAgICAgICAgc
 2VsZi5jdXJyZW50VGltZU1pbGxpcyA9IGN1cnJlbnRUaW1lTWlsbGlzCgogICAgZGVmIGluaXQo
 c2VsZiwgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMpOgogICAgICAgIHByaW50ICJVc2VyIHJlZ2l
 zdHJhdGlvbiBpbml0aWFsaXphdGlvbiIKICAgICAgICBwcmludCAiVXNlciByZWdpc3RyYXRpb2
 4gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5IgoKICAgICAgICByZXR1cm4gVHJ1ZSAgIAoKICAgI
 GRlZiBkZXN0cm95KHNlbGYsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToKICAgICAgICBwcmlu
 dCAiVXNlciByZWdpc3RyYXRpb24gZGVzdHJveSIKICAgICAgICBwcmludCAiVXNlciByZWdpc3R
 yYXRpb24gZGVzdHJveWVkIHN1Y2Nlc3NmdWxseSIKICAgICAgICByZXR1cm4gVHJ1ZSAgIAoKIC
 AgICMgVXBkYXRlIHVzZXIgZW50cnkgYmVmb3JlIHBlcnNpc3RlbnQgaXQKICAgICMgICB1c2VyI
 GlzIG9yZy5nbHV1Lm94dHJ1c3QubW9kZWwuR2x1dUN1c3RvbVBlcnNvbgogICAgIyAgIHBlcnNp
 c3RlZCBpcyBib29sZWFuIHZhbHVlIHRvIHNwZWNpZnkgaWYgb3BlcmF0aW9uIHR5cGU6IGFkZC9
 tb2RpZnkKICAgICMgICBjb25maWd1cmF0aW9uQXR0cmlidXRlcyBpcyBqYXZhLnV0aWwuTWFwPF
 N0cmluZywgU2ltcGxlQ3VzdG9tUHJvcGVydHk+CiAgICBkZWYgdXBkYXRlVXNlcihzZWxmLCB1c
 2VyLCBwZXJzaXN0ZWQsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToKICAgICAgICB1aWQgPSB1
 c2VyLmdldFVpZCgpCiAgICAgICAgcHJpbnQgIlVzZXIgVWlkOiIsIHVpZAogICAgICAgIAogICA
 gICAgIG1haWwgPSB1aWQgKyAiQGV4YW1wbGUub3JnIgogICAgICAgIHVzZXIuc2V0TWFpbChtYW
 lsKQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBnZXRBcGlWZXJzaW9uKHNlbGYpOgogI
 CAgICAgIHJldHVybiAxCg==
oxScriptType: user_registration
programmingLanguage: python

dn: inum=%(inumOrg)s!2DAF.F995,ou=scripts,o=%(inumOrg)s,o=gluu
objectClass: oxCustomScript
objectClass: top
description: Sample UMA Authorization Policy
displayName: uma_autorization_policy
gluuStatus: false
inum: %(inumOrg)s!2DAF.F995
oxLevel: 100
oxRevision: 1
oxScript:: ZnJvbSBvcmcueGRpLm1vZGVsLmN1c3RvbS5zY3JpcHQudHlwZS51bWEgaW1wb3J0I
 EF1dGhvcml6YXRpb25Qb2xpY3lUeXBlCmZyb20gb3JnLnhkaS51dGlsIGltcG9ydCBTdHJpbmdI
 ZWxwZXIsIEFycmF5SGVscGVyCmZyb20gamF2YS51dGlsIGltcG9ydCBBcnJheXMsIEFycmF5TGl
 zdApmcm9tIG9yZy54ZGkub3hhdXRoLnNlcnZpY2UudW1hLmF1dGhvcml6YXRpb24gaW1wb3J0IE
 F1dGhvcml6YXRpb25Db250ZXh0CgppbXBvcnQgamF2YQoKY2xhc3MgQXV0aG9yaXphdGlvblBvb
 GljeShBdXRob3JpemF0aW9uUG9saWN5VHlwZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgY3Vy
 cmVudFRpbWVNaWxsaXMpOgogICAgICAgIHNlbGYuY3VycmVudFRpbWVNaWxsaXMgPSBjdXJyZW5
 0VGltZU1pbGxpcwoKICAgIGRlZiBpbml0KHNlbGYsIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKT
 oKICAgICAgICBwcmludCAiVU1BIGF1dGhvcml6YXRpb24gcG9saWN5IGluaXRpYWxpemF0aW9uI
 gogICAgICAgIHByaW50ICJVTUEgYXV0aG9yaXphdGlvbiBwb2xpY3kgaW5pdGlhbGl6ZWQgc3Vj
 Y2Vzc2Z1bGx5IgoKICAgICAgICByZXR1cm4gVHJ1ZSAgIAoKICAgIGRlZiBkZXN0cm95KHNlbGY
 sIGNvbmZpZ3VyYXRpb25BdHRyaWJ1dGVzKToKICAgICAgICBwcmludCAiVU1BIGF1dGhvcml6YX
 Rpb24gcG9saWN5IGRlc3Ryb3kiCiAgICAgICAgcHJpbnQgIlVNQSBhdXRob3JpemF0aW9uIHBvb
 GljeSBkZXN0cm95ZWQgc3VjY2Vzc2Z1bGx5IgogICAgICAgIHJldHVybiBUcnVlICAgCgogICAg
 ZGVmIGdldEFwaVZlcnNpb24oc2VsZik6CiAgICAgICAgcmV0dXJuIDEKCiAgICAjIFVwZGF0ZSB
 1c2VyIGVudHJ5IGJlZm9yZSBwZXJzaXN0ZW50IGl0CiAgICAjICAgdXNlciBpcyBvcmcuZ2x1dS
 5veHRydXN0Lm1vZGVsLkdsdXVDdXN0b21QZXJzb24KICAgICMgICBwZXJzaXN0ZWQgaXMgYm9vb
 GVhbiB2YWx1ZSB0byBzcGVjaWZ5IGlmIG9wZXJhdGlvbiB0eXBlOiBhZGQvbW9kaWZ5CiAgICAj
 ICAgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMgaXMgamF2YS51dGlsLk1hcDxTdHJpbmcsIFNpbXB
 sZUN1c3RvbVByb3BlcnR5PgogICAgZGVmIGF1dGhvcml6ZShzZWxmLCBhdXRob3JpemF0aW9uQ2
 9udGV4dCwgY29uZmlndXJhdGlvbkF0dHJpYnV0ZXMpOgogICAgICAgIHByaW50ICJVTUEgQXV0a
 G9yaXphdGlvbiBwb2xpY3kuIEF0dGVtcHRpbmcgdG8gYXV0aG9yaXplIGNsaWVudC4uLiIKICAg
 ICAgICBjbGllbnRfaWQgPSBhdXRob3JpemF0aW9uQ29udGV4dC5nZXRHcmFudCgpLmdldENsaWV
 udElkKCkKCiAgICAgICAgcHJpbnQgIlVNQSBBdXRob3JpemF0aW9uIHBvbGljeS4gQ2xpZW50Oi
 AiLCBjbGllbnRfaWQKICAgICAgICBpZiAoU3RyaW5nSGVscGVyLmVxdWFsc0lnbm9yZUNhc2UoI
 kAhMTExMSEwMDA4IUZEQzAuMEZGNSIsIGNsaWVudF9pZCkpOgogICAgICAgICAgICBwcmludCAi
 VU1BIEF1dGhvcml6YXRpb24gcG9saWN5LiBBdXRob3JpemluZyBjbGllbnQiCiAgICAgICAgICA
 gIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgIlVNQSBBdXRob3
 JpemF0aW9uIHBvbGljeS4gQ2xpZW50IGlzbid0IGF1dGhvcml6ZWQiCiAgICAgICAgICAgIHJld
 HVybiBGYWxzZQoKICAgICAgICBwcmludCAiVU1BIEF1dGhvcml6YXRpb24gcG9saWN5LiBBdXRo
 b3JpemluZyBjbGllbnQiCiAgICAgICAgcmV0dXJuIFRydWUK
oxScriptType: uma_authorization_policy
programmingLanguage: python

dn: inum=%(inumOrg)s!13D3.E7AD,ou=scripts,o=%(inumOrg)s,o=gluu
objectClass: oxCustomScript
objectClass: top
description: Sample Cache Refresh Script
displayName: cache_refresh
gluuStatus: false
inum: %(inumOrg)s!13D3.E7AD
oxLevel: 100
oxRevision: 1
oxScript:: ZnJvbSBvcmcueGRpLm1vZGVsLmN1c3RvbS5zY3JpcHQudHlwZS51c2VyIGltcG9yd
 CBDYWNoZVJlZnJlc2hUeXBlCmZyb20gb3JnLnhkaS51dGlsIGltcG9ydCBTdHJpbmdIZWxwZXIs
 IEFycmF5SGVscGVyCmZyb20gamF2YS51dGlsIGltcG9ydCBBcnJheXMsIEFycmF5TGlzdApmcm9
 tIG9yZy5nbHV1Lm94dHJ1c3QubW9kZWwgaW1wb3J0IEdsdXVDdXN0b21QZXJzb24KZnJvbSBvcm
 cuZ2x1dS5veHRydXN0Lm1vZGVsIGltcG9ydCBHbHV1Q3VzdG9tQXR0cmlidXRlCgppbXBvcnQga
 mF2YQoKY2xhc3MgQ2FjaGVSZWZyZXNoKENhY2hlUmVmcmVzaFR5cGUpOgogICAgZGVmIF9faW5p
 dF9fKHNlbGYsIGN1cnJlbnRUaW1lTWlsbGlzKToKICAgICAgICBzZWxmLmN1cnJlbnRUaW1lTWl
 sbGlzID0gY3VycmVudFRpbWVNaWxsaXMKCiAgICBkZWYgaW5pdChzZWxmLCBjb25maWd1cmF0aW
 9uQXR0cmlidXRlcyk6CiAgICAgICAgcHJpbnQgIkNhY2hlIHJlZnJlc2ggaW5pdGlhbGl6YXRpb
 24iCiAgICAgICAgcHJpbnQgIkNhY2hlIHJlZnJlc2ggaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5
 IgoKICAgICAgICByZXR1cm4gVHJ1ZSAgIAoKICAgIGRlZiBkZXN0cm95KHNlbGYsIGNvbmZpZ3V
 yYXRpb25BdHRyaWJ1dGVzKToKICAgICAgICBwcmludCAiQ2FjaGUgcmVmcmVzaCBkZXN0cm95Ig
 ogICAgICAgIHByaW50ICJDYWNoZSByZWZyZXNoIGRlc3Ryb3llZCBzdWNjZXNzZnVsbHkiCiAgI
 CAgICAgcmV0dXJuIFRydWUgICAKCiAgICAjIFVwZGF0ZSB1c2VyIGVudHJ5IGJlZm9yZSBwZXJz
 aXN0IGl0CiAgICAjICAgdXNlciBpcyBvcmcuZ2x1dS5veHRydXN0Lm1vZGVsLkdsdXVDdXN0b21
 QZXJzb24KICAgICMgICBjb25maWd1cmF0aW9uQXR0cmlidXRlcyBpcyBqYXZhLnV0aWwuTWFwPF
 N0cmluZywgU2ltcGxlQ3VzdG9tUHJvcGVydHk+CiAgICBkZWYgdXBkYXRlVXNlcihzZWxmLCB1c
 2VyLCBjb25maWd1cmF0aW9uQXR0cmlidXRlcyk6CiAgICAgICAgYXR0cmlidXRlcyA9IHVzZXIu
 Z2V0Q3VzdG9tQXR0cmlidXRlcygpCgogICAgICAgICMgQWRkIG5ldyBhdHRyaWJ1dGUgcHJlZmV
 ycmVkTGFuZ3VhZ2UKICAgICAgICBhdHRyUHJlZmZlcmVkTGFuZ3VhZ2UgPSBHbHV1Q3VzdG9tQX
 R0cmlidXRlKCJwcmVmZXJyZWRMYW5ndWFnZSIsICJlbi11cyIpCiAgICAgICAgYXR0cmlidXRlc
 y5hZGQoYXR0clByZWZmZXJlZExhbmd1YWdlKQoKICAgICAgICAjIEFkZCBuZXcgYXR0cmlidXRl
 IHVzZXJQYXNzd29yZAogICAgICAgIGF0dHJVc2VyUGFzc3dvcmQgPSBHbHV1Q3VzdG9tQXR0cml
 idXRlKCJ1c2VyUGFzc3dvcmQiLCAidGVzdCIpCiAgICAgICAgYXR0cmlidXRlcy5hZGQoYXR0cl
 VzZXJQYXNzd29yZCkKCiAgICAgICAgIyBVcGRhdGUgZ2l2ZW5OYW1lIGF0dHJpYnV0ZQogICAgI
 CAgIGZvciBhdHRyaWJ1dGUgaW4gYXR0cmlidXRlczoKICAgICAgICAgICAgYXR0ck5hbWUgPSBh
 dHRyaWJ1dGUuZ2V0TmFtZSgpCiAgICAgICAgICAgIGlmICgoImdpdmVubmFtZSIgPT0gU3RyaW5
 nSGVscGVyLnRvTG93ZXJDYXNlKGF0dHJOYW1lKSkgYW5kIFN0cmluZ0hlbHBlci5pc05vdEVtcH
 R5KGF0dHJpYnV0ZS5nZXRWYWx1ZSgpKSk6CiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuc2V0V
 mFsdWUoU3RyaW5nSGVscGVyLnJlbW92ZU11bHRpcGxlU3BhY2VzKGF0dHJpYnV0ZS5nZXRWYWx1
 ZSgpKSArICIgKHVwZGF0ZWQpIikKCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgZ2V0QXB
 pVmVyc2lvbihzZWxmKToKICAgICAgICByZXR1cm4gMQo=
oxScriptType: cache_refresh
programmingLanguage: python

